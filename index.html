<!DOCTYPE html>
<html>
  <head>
    <title>Startup Valuation Calculator</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 30px;
      }

      h1 {
        text-align: center;
      }

      form {
        max-width: 400px;
        margin: 0 auto;
      }

      label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
      }

      input[type="number"],
      select {
        width: 100%;
        padding: 8px;
        margin-bottom: 15px;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
        font-size: 16px;
      }

      button[type="submit"] {
        display: block;
        width: 100%;
        padding: 10px;
        background-color: #4CAF50;
        color: #fff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
      }

      #result {
        margin-top: 20px;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
      }

      #recordedValues {
        margin-top: 30px;
      }

      table {
        width: 100%;
        border-collapse: collapse;
      }

      th, td {
        padding: 8px;
        text-align: left;
        border-bottom: 1px solid #ddd;
      }
    </style>
  </head>
  <body>
    <h1>Startup Valuation Calculator</h1>
    <form onsubmit="calculateValuation(event)">
      <label for="stage">Stage of the startup:</label>
      <select id="stage" required>
        <option value="idea">Idea</option>
        <option value="prototype">Prototype</option>
        <option value="revenue">Revenue</option>
      </select>

      <label for="revenue">Annual Revenue ($):</label>
      <input type="number" id="revenue" step="0.01" required>

      <label for="growthRate">Growth Rate:</label>
      <input type="number" id="growthRate" step="0.01" required>

      <label for="industryMultiplier">Industry Multiplier:</label>
      <input type="number" id="industryMultiplier" required>

      <label for="opportunityCost">Opportunity Cost ($):</label>
      <input type="number" id="opportunityCost" required>

      <label for="tam">Total Addressable Market (TAM):</label>
      <input type="number" id="tam" required>

      <label for="sam">Serviceable Addressable Market (SAM):</label>
      <input type="number" id="sam" required>

      <label for="som">Serviceable Obtainable Market (SOM):</label>
      <input type="number" id="som" required>

      <button type="submit">Calculate Valuation</button>
    </form>
    <div id="result"></div>

    <div id="recordedValues"></div>

    <script>
      var recordedValues = [];

      function calculateValuation(event) {
        event.preventDefault();
        var stage = document.getElementById("stage").value;
        var revenue = parseFloat(document.getElementById("revenue").value);
        var growthRate = parseFloat(document.getElementById("growthRate").value);
        var industryMultiplier = parseFloat(document.getElementById("industryMultiplier").value);
        var opportunityCost = parseFloat(document.getElementById("opportunityCost").value);
        var tam = parseFloat(document.getElementById("tam").value);
        var sam = parseFloat(document.getElementById("sam").value);
        var som = parseFloat(document.getElementById("som").value);

        var valuation = calculate_startup_valuation(stage, revenue, growthRate, industryMultiplier, opportunityCost, tam, sam, som);

        if (valuation !== null) {
          document.getElementById("result").innerText = "The startup valuation is $" + valuation.toFixed(2);

          // Record the values and timestamp
          var timestamp = new Date().toLocaleString();
          var recordedValue = {
            stage: stage,
            revenue: revenue,
            growthRate: growthRate,
            industryMultiplier: industryMultiplier,
            opportunityCost: opportunityCost,
            tam: tam,
            sam: sam,
            som: som,
            valuation: valuation.toFixed(2),
            timestamp: timestamp
          };
          recordedValues.push(recordedValue);

          displayRecordedValues();
        } else {
          document.getElementById("result").innerText = "Invalid stage entered. Please choose 'idea', 'prototype', or 'revenue'.";
        }
      }

      function calculate_startup_valuation(stage, revenue, growth_rate, industry_multiplier, opportunity_cost, tam, sam, som) {
        if (stage === 'idea') {
          return tam * 0.05;
        } else if (stage === 'prototype') {
          return tam * 0.1;
        } else if (stage === 'revenue') {
          var valuation = revenue * (1 + growth_rate) * industry_multiplier - opportunity_cost;
          return valuation * (sam / som);
        } else {
          return null;
        }
      }

      function displayRecordedValues() {
        var recordedValuesContainer = document.getElementById("recordedValues");
        recordedValuesContainer.innerHTML = "";

        if (recordedValues.length === 0) {
          return;
        }

        var table = document.createElement("table");
        var tableHeader = document.createElement("thead");
        var tableBody = document.createElement("tbody");

        // Create table header
        var headerRow = document.createElement("tr");
        var headers = ["Stage", "Revenue ($)", "Growth Rate", "Industry Multiplier", "Opportunity Cost ($)", "TAM", "SAM", "SOM", "Valuation ($)", "Timestamp"];
        headers.forEach(function(header) {
          var th = document.createElement("th");
          th.innerText = header;
          headerRow.appendChild(th);
        });
        tableHeader.appendChild(headerRow);
        table.appendChild(tableHeader);

        // Create table body
        recordedValues.forEach(function(value) {
          var row = document.createElement("tr");
          Object.values(value).forEach(function(val) {
            var td = document.createElement("td");
            td.innerText = val;
            row.appendChild(td);
          });
          tableBody.appendChild(row);
        });

        table.appendChild(tableBody);
        recordedValuesContainer.appendChild(table);
      }
    </script>
  </body>
</html>
